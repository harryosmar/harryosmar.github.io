<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/4473ecc91f70f139-s.p.woff" as="font" crossorigin="" type="font/woff"/><link rel="preload" href="/_next/static/media/463dafcda517f24f-s.p.woff" as="font" crossorigin="" type="font/woff"/><link rel="preload" as="image" href="/images/articles/ai-ollama-structured-output.webp" fetchPriority="high"/><link rel="stylesheet" href="/_next/static/css/7b555c975a649a76.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/58640552b67a3ac6.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/6583aec57b22070b.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-c41610a8369a05e8.js"/><script src="/_next/static/chunks/e0c93034-2e51becf66fbbe91.js" async=""></script><script src="/_next/static/chunks/429-f447166de2c405e1.js" async=""></script><script src="/_next/static/chunks/main-app-5ee452122649bd99.js" async=""></script><script src="/_next/static/chunks/513-54c786173a9c666c.js" async=""></script><script src="/_next/static/chunks/122-1e2541ae7fd00b15.js" async=""></script><script src="/_next/static/chunks/app/(content)/layout-98a57fd1c16e634e.js" async=""></script><script src="/_next/static/chunks/app/layout-dc2409b386032b48.js" async=""></script><script src="/_next/static/chunks/189-76139bfb22cdcfc2.js" async=""></script><script src="/_next/static/chunks/637-6e55fbf6c1f17bbc.js" async=""></script><script src="/_next/static/chunks/app/(content)/articles/%5Bslug%5D/page-e12b9a0df8b2e915.js" async=""></script><title>Unlocking the Power of AI: Ollama LLM with Structured Output | Harry Osmar Sitohang | Harry Osmar Sitohang</title><meta name="description" content="JSON schema in Ollama ü¶ô, revolutionizes the way we handle data extraction, response structuring, and consistency"/><meta name="robots" content="index, follow"/><meta name="application-name" content="Harry Osmar Sitohang"/><meta name="linkedin:card" content="summary_large_image"/><meta name="linkedin:title" content="Unlocking the Power of AI: Ollama LLM with Structured Output | Harry Osmar Sitohang"/><meta name="linkedin:description" content="JSON schema in Ollama ü¶ô, revolutionizes the way we handle data extraction, response structuring, and consistency"/><meta name="linkedin:image" content="/images/articles/ai-ollama-structured-output.webp"/><meta name="linkedin:creator" content="Harry Osmar Sitohang"/><meta name="al:ios:url" content="linkedin://shareArticle?mini=true&amp;url=https%3A%2F%2Fwww.harryosmarsitohang.com%2Farticles%2Fai-ollama-structured-output"/><meta name="al:android:url" content="linkedin://shareArticle?mini=true&amp;url=https%3A%2F%2Fwww.harryosmarsitohang.com%2Farticles%2Fai-ollama-structured-output"/><meta name="al:ios:app_store_id" content="288429040"/><meta name="al:android:package" content="com.linkedin.android"/><meta name="al:ios:app_name" content="LinkedIn"/><meta name="al:android:app_name" content="LinkedIn"/><meta property="og:title" content="Unlocking the Power of AI: Ollama LLM with Structured Output | Harry Osmar Sitohang"/><meta property="og:description" content="JSON schema in Ollama ü¶ô, revolutionizes the way we handle data extraction, response structuring, and consistency"/><meta property="og:url" content="https://www.harryosmarsitohang.com/articles/ai-ollama-structured-output"/><meta property="og:site_name" content="Harry Osmar Sitohang"/><meta property="og:locale" content="en_US"/><meta property="og:image" content="https://www.harryosmarsitohang.com/images/articles/ai-ollama-structured-output.webp"/><meta property="og:image:width" content="1200"/><meta property="og:image:height" content="630"/><meta property="og:image:alt" content="Unlocking the Power of AI: Ollama LLM with Structured Output"/><meta property="og:type" content="article"/><meta property="article:published_time" content="2024-12-12T22:53:00+07:00"/><meta property="article:author" content="https://www.harryosmarsitohang.com/about/harry-osmar-sitohang"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="Unlocking the Power of AI: Ollama LLM with Structured Output | Harry Osmar Sitohang"/><meta name="twitter:description" content="JSON schema in Ollama ü¶ô, revolutionizes the way we handle data extraction, response structuring, and consistency"/><meta name="twitter:image" content="https://www.harryosmarsitohang.com/images/articles/ai-ollama-structured-output.webp"/><link rel="icon" href="/favicon.ico" type="image/x-icon" sizes="16x16"/><meta name="next-size-adjust"/><script src="/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js" noModule=""></script></head><body class="__variable_1e4310 __variable_c3aa02 min-h-screen font-sans antialiased bg-background text-foreground dark:bg-neutral-900 dark:text-neutral-100 transition-colors"><script>((e,t,r,n,l,o,a,u)=>{let i=document.documentElement,c=["light","dark"];function s(t){(Array.isArray(e)?e:[e]).forEach(e=>{let r="class"===e,n=r&&o?l.map(e=>o[e]||e):l;r?(i.classList.remove(...n),i.classList.add(t)):i.setAttribute(e,t)}),u&&c.includes(t)&&(i.style.colorScheme=t)}if(n)s(n);else try{let e=localStorage.getItem(t)||r,n=a&&"system"===e?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e;s(n)}catch(e){}})("class","theme","system",null,["light","dark"],null,true,true)</script><div class="min-h-screen bg-white dark:bg-neutral-900"><nav class="border-b border-neutral-200 dark:border-neutral-800"><div class="max-w-[692px] mx-auto px-4"><div class="flex items-center justify-between"><div class="flex gap-8"><a class="inline-flex items-center px-3 border-b-2 border-transparent text-neutral-500 hover:border-neutral-300 dark:hover:border-neutral-700 dark:text-neutral-400" title="About" href="/about/harry-osmar-sitohang"><svg class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg><span class="sr-only">About</span></a><a class="relative py-5 text-sm font-medium transition-colors group text-neutral-900 dark:text-neutral-100" href="/articles">Articles<div class="absolute bottom-0 left-0 right-0 h-[2px] bg-neutral-900 dark:bg-neutral-100"></div></a><a class="relative py-5 text-sm font-medium transition-colors group text-neutral-500 hover:text-neutral-900 dark:hover:text-neutral-100" href="/projects">Projects<div class="absolute bottom-0 left-0 right-0 h-[2px] bg-neutral-900 dark:bg-neutral-100 scale-x-0 transition-transform group-hover:scale-x-100"></div></a></div></div></div></nav><div class="min-h-screen"><div><div class="max-w-[692px] mx-auto px-4 pt-20 pb-12"><div class="flex items-center justify-between mb-12"><a class="inline-flex items-center gap-2 transition-colors mb-6 text-sm text-neutral-500 hover:text-neutral-900 dark:hover:text-neutral-100" href="/articles"><span>‚Üê Articles</span></a><div class="relative undefined"><button class="inline-flex items-center gap-1.5 text-neutral-600 hover:text-neutral-900 dark:text-neutral-400 dark:hover:text-neutral-100" aria-label="Share article"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-share2 w-4 h-4"><circle cx="18" cy="5" r="3"></circle><circle cx="6" cy="12" r="3"></circle><circle cx="18" cy="19" r="3"></circle><line x1="8.59" x2="15.42" y1="13.51" y2="17.49"></line><line x1="15.41" x2="8.59" y1="6.51" y2="10.49"></line></svg></button></div></div><h1 class="text-4xl font-bold tracking-tight text-neutral-900 dark:text-neutral-100 mb-8">Unlocking the Power of AI: Ollama LLM with Structured Output</h1><div class="flex items-start gap-3 mb-12"><div class="w-12 h-12 rounded-full overflow-hidden flex-shrink-0"><div class="relative w-full h-full object-cover bg-neutral-100 dark:bg-neutral-800 animate-pulse" style="width:48px;height:48px"></div></div><div class="flex flex-col flex-1"><div class="flex items-center justify-between"><a class="text-[15px] font-medium text-neutral-900 dark:text-neutral-100 hover:underline" href="/about/harry-osmar-sitohang">Harry Osmar Sitohang</a></div><div class="flex items-center gap-1 text-[14px] text-neutral-500"><div class="text-neutral-500">Senior Principal Engineer</div><span>¬∑</span><time dateTime="2024-12-12T22:53:00+07:00">Dec 12, 2024</time><span>¬∑</span><span>6<!-- --> min read</span></div></div></div><div class="relative aspect-[16/9] rounded-lg overflow-hidden mb-12"><div class="relative w-full h-full object-cover bg-neutral-100 dark:bg-neutral-800 animate-pulse"><img alt="Unlocking the Power of AI: Ollama LLM with Structured Output" fetchPriority="high" decoding="async" data-nimg="fill" class="opacity-0 transition-opacity duration-300 object-cover" style="position:absolute;height:100%;width:100%;left:0;top:0;right:0;bottom:0;color:transparent" src="/images/articles/ai-ollama-structured-output.webp"/></div></div></div></div><div class="relative"><div class="lg:grid lg:grid-cols-[692px_250px] lg:gap-16 lg:justify-center"><article class="mx-auto w-full px-4 pb-20"><div class="sticky top-0 z-10 -mx-4 px-4 py-3 bg-white/95 dark:bg-neutral-900/95 backdrop-blur-sm border-b border-neutral-200 dark:border-neutral-800"><div class="flex items-center justify-between max-w-[692px] mx-auto"><div class="flex items-center gap-4"><h2 class="text-sm font-medium text-neutral-900 dark:text-neutral-100">Unlocking the Power of AI: Ollama LLM with Structured Output</h2></div><div class="relative undefined"><button class="inline-flex items-center gap-1.5 text-neutral-600 hover:text-neutral-900 dark:text-neutral-400 dark:hover:text-neutral-100" aria-label="Share article"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-share2 w-4 h-4"><circle cx="18" cy="5" r="3"></circle><circle cx="6" cy="12" r="3"></circle><circle cx="18" cy="19" r="3"></circle><line x1="8.59" x2="15.42" y1="13.51" y2="17.49"></line><line x1="15.41" x2="8.59" y1="6.51" y2="10.49"></line></svg></button></div></div></div><div class="mt-8 prose dark:prose-invert prose-neutral max-w-none prose-headings:font-serif prose-headings:tracking-tight prose-headings:font-normal prose-h2:text-[24px] prose-h2:leading-[32px] prose-p:text-neutral-800 dark:prose-p:text-neutral-200 prose-p:leading-[32px] prose-a:text-neutral-900 dark:prose-a:text-neutral-100 prose-a:decoration-neutral-300 dark:prose-a:decoration-neutral-700 hover:prose-a:decoration-neutral-600 dark:hover:prose-a:decoration-neutral-400"><div class="prose dark:prose-invert max-w-none"><h2 id="-ollama-introduction">ü¶ô Ollama introduction<span class="ml-2 opacity-0 hover:opacity-100"><a href="#-ollama-introduction" class="anchor" aria-hidden="true">#</a></span></h2>
<p><a href="https://ollama.com/">Ollama</a> is a powerful platform designed to make it easy for developers <strong>to run large language models (LLMs) directly on their local computers</strong>, without needing a <del>big server</del> or expensive hardware like <del>high-end GPUs</del>.</p>
<p>With <a href="https://ollama.com/">Ollama</a>, you can get up and running with models such as <code>Llama 3.3</code>, <code>Phi 3</code>, <code>Mistral</code>, <code>Gemma 2</code>, and more, all <del>without the need for specialized cloud infrastructure</del>.</p>
<p>In short, <a href="https://ollama.com/">Ollama</a> democratizes access to cutting-edge <code>AI models</code>, making them <strong>accessible on personal computers</strong> and empowering developers to build AI solutions without the burden of <del>expensive server infrastructure</del>.</p>
<h2 id="-why-use-json-schema-constraints-in-ollama">üîë Why Use JSON Schema Constraints in Ollama?<span class="ml-2 opacity-0 hover:opacity-100"><a href="#-why-use-json-schema-constraints-in-ollama" class="anchor" aria-hidden="true">#</a></span></h2>
<p><a href="https://ollama.com/">Ollama</a> now supports to constrain the output to a json
schema. <a href="https://ollama.com/blog/structured-outputs">https://ollama.com/blog/structured-outputs</a></p>
<p>Use cases for structured outputs include:</p>
<ul>
<li>Parsing data from documents</li>
<li>Extracting data from images</li>
<li>Structuring all language model responses</li>
<li>More reliability and consistency than JSON mode</li>
</ul>
<h2 id="-getting-started">üöÄ Getting Started<span class="ml-2 opacity-0 hover:opacity-100"><a href="#-getting-started" class="anchor" aria-hidden="true">#</a></span></h2>
<h3 id="1-install-ollama">1. Install Ollama<span class="ml-2 opacity-0 hover:opacity-100"><a href="#1-install-ollama" class="anchor" aria-hidden="true">#</a></span></h3>
<p>Download <a href="https://ollama.com/">Ollama</a> from <a href="https://ollama.com/download">https://ollama.com/download</a>. Choose the appropriate version for your
platform and complete the installation.</p>
<h3 id="2-verify-installation">2. Verify Installation<span class="ml-2 opacity-0 hover:opacity-100"><a href="#2-verify-installation" class="anchor" aria-hidden="true">#</a></span></h3>
<p>After installation, confirm the version by running:</p>
<pre><code class="hljs language-shell">ollama --version
</code></pre>
<p>expected output format:</p>
<pre><code class="hljs language-shell">ollama version is 0.5.1
</code></pre>
<h3 id="3-start-ollama-server">3. Start Ollama Server<span class="ml-2 opacity-0 hover:opacity-100"><a href="#3-start-ollama-server" class="anchor" aria-hidden="true">#</a></span></h3>
<p>Run the following command to start the server:</p>
<pre><code class="hljs language-shell">ollama serve
</code></pre>
<p>By default, the server runs on port 11434. You can verify this by
visiting <a href="http://localhost:11434">http://localhost:11434</a>.</p>
<h3 id="4-download-the-ollama-model">4. Download the Ollama Model<span class="ml-2 opacity-0 hover:opacity-100"><a href="#4-download-the-ollama-model" class="anchor" aria-hidden="true">#</a></span></h3>
<p>I recommend the <code>llama3.2</code> model for its compact size (<code>2.0 GB</code>) and impressive performance.</p>
<p>It features <code>3 billion</code> parameters and <strong>outperforms</strong> many larger models in industry benchmarks.</p>
<p>Download the model with:</p>
<pre><code class="hljs language-shell">ollama run llama3.2
</code></pre>
<p>Verify the download:</p>
<pre><code class="hljs language-shell">ollama list
</code></pre>
<p>Expected output:</p>
<pre><code class="hljs language-shell">NAME                       ID              SIZE      MODIFIED        
llama3.2:latest            a80c4f17acd5    2.0 GB    n weeks ago
</code></pre>
<h2 id="Ô∏è-run-using-curl">‚ñ∂Ô∏è Run using CURL<span class="ml-2 opacity-0 hover:opacity-100"><a href="#Ô∏è-run-using-curl" class="anchor" aria-hidden="true">#</a></span></h2>
<p>Run using curl directly to <a href="https://ollama.com/">Ollama</a> server <a href="http://localhost:11434">http://localhost:11434</a>.</p>
<p>There is no need to code, there is no setup, no need to install anything (*make sure you have curl installed).</p>
<h3 id="use-case-1-extract-country-data">Use Case 1: Extract Country Data<span class="ml-2 opacity-0 hover:opacity-100"><a href="#use-case-1-extract-country-data" class="anchor" aria-hidden="true">#</a></span></h3>
<blockquote>
<p>Input Prompt: "Tell me about Canada."</p>
</blockquote>
<h4 id="schema">Schema</h4>
<pre><code class="hljs language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"object"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"properties"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"capital"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"languages"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"array"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"items"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"required"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">"name"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"capital"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"languages"</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 id="curl-request">Curl Request</h4>
<p>json schema above included in the request in field <code>format</code>.</p>
<p>Run the following command in the terminal:</p>
<pre><code class="hljs language-bash">curl --location <span class="hljs-string">'http://127.0.0.1:11434/api/chat'</span> \
--header <span class="hljs-string">'Content-Type: application/json'</span> \
--data <span class="hljs-string">'{
  "model": "llama3.2",
  "messages": [{"role": "user", "content": "Tell me about Canada."}],
  "stream": false,
  "format": {
    "type": "object",
    "properties": {
      "name": { "type": "string" },
      "capital": { "type": "string" },
      "languages": { "type": "array", "items": { "type": "string" } }
    },
    "required": ["name", "capital", "languages"]
  }
}'</span>
</code></pre>
<h4 id="response">Response</h4>
<pre><code class="hljs language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"model"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"llama3.2"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"created_at"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2024-12-12T07:47:22.184905Z"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"message"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"role"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"assistant"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"{ \"capital\": \"Ottawa\", \"languages\": [\"English\", \"French\"], \"name\":\"Canada\" }"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"done_reason"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"stop"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"done"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"total_duration"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1232600000</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"load_duration"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">33616458</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"prompt_eval_count"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">30</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"prompt_eval_duration"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">495000000</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"eval_count"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">29</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"eval_duration"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">700000000</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>see field <code>message.content</code> using the same json schema as above</p>
<pre><code class="hljs language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"capital"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Ottawa"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"languages"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">"English"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"French"</span>
  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Canada"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 id="use-case-2-extract-pets-data">Use Case 2: Extract Pets Data<span class="ml-2 opacity-0 hover:opacity-100"><a href="#use-case-2-extract-pets-data" class="anchor" aria-hidden="true">#</a></span></h3>
<blockquote>
<p>Prompt: "I have two pets. A cat named Luna who is 5 years old and loves playing with yarn. She has grey fur. I also have a 2-year-old black cat named Loki who loves tennis balls."</p>
</blockquote>
<h4 id="schema-1">Schema</h4>
<pre><code class="hljs language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"$defs"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"Pet"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"properties"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"age"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"integer"</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"animal"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"color"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"anyOf"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
            <span class="hljs-punctuation">{</span>
              <span class="hljs-attr">"const"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"black"</span>
            <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
            <span class="hljs-punctuation">{</span>
              <span class="hljs-attr">"const"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"grey"</span>
            <span class="hljs-punctuation">}</span>
          <span class="hljs-punctuation">]</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"favorite_toy"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"anyOf"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
            <span class="hljs-punctuation">{</span>
              <span class="hljs-attr">"const"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"yarn"</span>
            <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
            <span class="hljs-punctuation">{</span>
              <span class="hljs-attr">"const"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"tennis balls"</span>
            <span class="hljs-punctuation">}</span>
          <span class="hljs-punctuation">]</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span>
        <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"required"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-string">"name"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-string">"animal"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-string">"age"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-string">"color"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-string">"favorite_toy"</span>
      <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"object"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"properties"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"pets"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"array"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"items"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#/$defs/Pet"</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"required"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">"pets"</span>
  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"object"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 id="curl-request-1">Curl Request</h4>
<pre><code class="hljs language-bash">curl --location <span class="hljs-string">'http://127.0.0.1:11434/api/chat'</span> \
--header <span class="hljs-string">'Content-Type: application/json'</span> \
--data <span class="hljs-string">'{
  "model": "llama3.2",
  "messages": [{
    "role": "user",
    "content": "I have two pets. A cat named Luna who is 5 years old and loves playing with yarn. She has grey fur. I also have a 2-year-old black cat named Loki who loves tennis balls."
  }],
  "stream": false,
  "format": {
    "$defs": {
      "Pet": {
        "properties": {
          "age": { "type": "integer" },
          "animal": { "type": "string" },
          "color": { "anyOf": [
            { "const": "black" },
            { "const": "grey" }
          ] },
          "favorite_toy": { "anyOf": [
            { "const": "yarn" },
            { "const": "tennis balls" }
          ] },
          "name": { "type": "string" }
        },
        "required": ["name", "animal", "age", "color", "favorite_toy"],
        "type": "object"
      }
    },
    "properties": {
      "pets": {
        "type": "array",
        "items": { "$ref": "#/$defs/Pet" }
      }
    },
    "required": ["pets"],
    "type": "object"
  }
}'</span>
</code></pre>
<h4 id="response-1">Response</h4>
<pre><code class="hljs language-json"><span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"model"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"llama3.2"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"created_at"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2024-12-12T08:32:37.316804Z"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"message"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"role"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"assistant"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"{ \"pets\": [ { \"age\": 5, \"animal\": \"cat\", \"color\": \"grey\", \"favorite_toy\": \"yarn\" , \"name\": \"Luna\"}, { \"age\": 2, \"animal\": \"cat\", \"color\": \"black\", \"favorite_toy\": \"tennis balls\" , \"name\": \"Loki\"}] }"</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"done_reason"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"stop"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"done"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"total_duration"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">7159731958</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"load_duration"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">829545916</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"prompt_eval_count"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">68</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"prompt_eval_duration"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">4620000000</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"eval_count"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">82</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"eval_duration"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1697000000</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>see field <code>message.content</code> using the same json schema as above</p>
<pre><code class="hljs language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"pets"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"age"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">5</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"animal"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"cat"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"color"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"grey"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"favorite_toy"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"yarn"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Luna"</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"age"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"animal"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"cat"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"color"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"black"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"favorite_toy"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"tennis balls"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Loki"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h2 id="Ô∏è-run-using-demo-python-api">‚ñ∂Ô∏è Run using demo python api<span class="ml-2 opacity-0 hover:opacity-100"><a href="#Ô∏è-run-using-demo-python-api" class="anchor" aria-hidden="true">#</a></span></h2>
<p>Recommend to use python 3.10.* with venv</p>
<h3 id="1-create-venv">1. Create venv<span class="ml-2 opacity-0 hover:opacity-100"><a href="#1-create-venv" class="anchor" aria-hidden="true">#</a></span></h3>
<p>Clone this repository</p>
<pre><code class="hljs language-shell">git clone https://github.com/harryosmar/ollama-demo-python.git
</code></pre>
<p>Run the following command in the terminal:</p>
<pre><code class="hljs language-shell">cd ollama-demo-python

python3 -m venv venv
</code></pre>
<h3 id="2-activate-venv">2. Activate venv<span class="ml-2 opacity-0 hover:opacity-100"><a href="#2-activate-venv" class="anchor" aria-hidden="true">#</a></span></h3>
<p>Run the following command in the terminal:</p>
<pre><code class="hljs language-shell">source ./venv/bin/activate
</code></pre>
<h3 id="3-install-requirements">3. Install requirements<span class="ml-2 opacity-0 hover:opacity-100"><a href="#3-install-requirements" class="anchor" aria-hidden="true">#</a></span></h3>
<p>Run the following command in the terminal:</p>
<pre><code class="hljs language-shell">pip install -r requirements.txt
</code></pre>
<ul>
<li><a href="https://flask.palletsprojects.com/en/2.3.x/">Flask</a> used as api framework</li>
<li><a href="https://pydantic-docs.helpmanual.io/">pydantic</a> used for data validation, create json schema from python class</li>
</ul>
<h3 id="4-run-app">4. Run app<span class="ml-2 opacity-0 hover:opacity-100"><a href="#4-run-app" class="anchor" aria-hidden="true">#</a></span></h3>
<p>Run the following command in the terminal:</p>
<pre><code class="hljs language-shell">flask --app main run
</code></pre>
<p>Start api server in <a href="http://127.0.0.1:5000">http://127.0.0.1:5000</a></p>
<h3 id="5-swagger-endpoints">5. Swagger endpoints<span class="ml-2 opacity-0 hover:opacity-100"><a href="#5-swagger-endpoints" class="anchor" aria-hidden="true">#</a></span></h3>
<p><a href="http://127.0.0.1:5000/apidocs/">swagger access link http://127.0.0.1:5000/apidocs/</a></p>
<h2 id="-conclusion">üî• Conclusion<span class="ml-2 opacity-0 hover:opacity-100"><a href="#-conclusion" class="anchor" aria-hidden="true">#</a></span></h2>
<p>By leveraging JSON schema constraints, <a href="https://ollama.com/">Ollama</a> ensures structured, reliable, and predictable outputs from LLMs. Whether you‚Äôre parsing documents, analyzing images, or building robust APIs, this feature delivers the consistency and accuracy you need.</p>
<h2 id="-credits">üèÖ Credits<span class="ml-2 opacity-0 hover:opacity-100"><a href="#-credits" class="anchor" aria-hidden="true">#</a></span></h2>
<p>Give credits to <strong>Matt Williams</strong> with his youtube channel <a href="https://www.youtube.com/@technovangelist">https://www.youtube.com/@technovangelist</a></p>
<p>He was part of the <strong>founding</strong> <a href="https://ollama.com/">Ollama</a> team. Don't forget to check out &#x26; subscribe to his channel, help him to reach 1 million subscribers.</p>
<p>I learned a lot from his videos, thank you Matt, hats off to you! üëè</p></div></div></article><aside class="hidden lg:block px-4"><div class="sticky top-8"></div></aside></div></div></div></div><script src="/_next/static/chunks/webpack-c41610a8369a05e8.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/media/4473ecc91f70f139-s.p.woff\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff\"}]\n2:HL[\"/_next/static/media/463dafcda517f24f-s.p.woff\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff\"}]\n3:HL[\"/_next/static/css/7b555c975a649a76.css\",\"style\"]\n4:HL[\"/_next/static/css/58640552b67a3ac6.css\",\"style\"]\n5:HL[\"/_next/static/css/6583aec57b22070b.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"6:I[5144,[],\"\"]\n9:I[6702,[],\"\"]\nb:I[8097,[],\"\"]\nc:I[4865,[\"513\",\"static/chunks/513-54c786173a9c666c.js\",\"122\",\"static/chunks/122-1e2541ae7fd00b15.js\",\"948\",\"static/chunks/app/(content)/layout-98a57fd1c16e634e.js\"],\"NavTabs\"]\nd:I[4387,[\"185\",\"static/chunks/app/layout-dc2409b386032b48.js\"],\"ThemeProvider\"]\n13:I[7091,[],\"\"]\na:[\"slug\",\"ai-ollama-structured-output\",\"d\"]\ne:{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"}\nf:{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"}\n10:{\"display\":\"inline-block\"}\n11:{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0}\n14:[]\n"])</script><script>self.__next_f.push([1,"0:[\"$\",\"$L6\",null,{\"buildId\":\"tACRX3J77uV_ByPTw4NTh\",\"assetPrefix\":\"\",\"urlParts\":[\"\",\"articles\",\"ai-ollama-structured-output\"],\"initialTree\":[\"\",{\"children\":[\"(content)\",{\"children\":[\"articles\",{\"children\":[[\"slug\",\"ai-ollama-structured-output\",\"d\"],{\"children\":[\"__PAGE__?{\\\"slug\\\":\\\"ai-ollama-structured-output\\\"}\",{}]}]}]}]},\"$undefined\",\"$undefined\",true],\"initialSeedData\":[\"\",{\"children\":[\"(content)\",{\"children\":[\"articles\",{\"children\":[[\"slug\",\"ai-ollama-structured-output\",\"d\"],{\"children\":[\"__PAGE__\",{},[[\"$L7\",\"$L8\",[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/58640552b67a3ac6.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}],[\"$\",\"link\",\"1\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/6583aec57b22070b.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]]],null],null]},[null,[\"$\",\"$L9\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"(content)\",\"children\",\"articles\",\"children\",\"$a\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$Lb\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\"}]],null]},[null,[\"$\",\"$L9\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"(content)\",\"children\",\"articles\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$Lb\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\"}]],null]},[[null,[\"$\",\"div\",null,{\"className\":\"min-h-screen bg-white dark:bg-neutral-900\",\"children\":[[\"$\",\"$Lc\",null,{}],[\"$\",\"$L9\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"(content)\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$Lb\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],\"notFoundStyles\":[]}]]}]],null],null]},[[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/7b555c975a649a76.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"suppressHydrationWarning\":true,\"children\":[\"$\",\"body\",null,{\"className\":\"__variable_1e4310 __variable_c3aa02 min-h-screen font-sans antialiased bg-background text-foreground dark:bg-neutral-900 dark:text-neutral-100 transition-colors\",\"children\":[\"$\",\"$Ld\",null,{\"children\":[\"$\",\"$L9\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$Lb\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":\"$e\",\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":\"$f\",\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":\"$10\",\"children\":[\"$\",\"h2\",null,{\"style\":\"$11\",\"children\":\"This page could not be found.\"}]}]]}]}]],\"notFoundStyles\":[]}]}]}]}]],null],null],\"couldBeIntercepted\":false,\"initialHead\":[null,\"$L12\"],\"globalErrorComponent\":\"$13\",\"missingSlots\":\"$W14\"}]\n"])</script><script>self.__next_f.push([1,"15:I[3642,[\"513\",\"static/chunks/513-54c786173a9c666c.js\",\"189\",\"static/chunks/189-76139bfb22cdcfc2.js\",\"122\",\"static/chunks/122-1e2541ae7fd00b15.js\",\"637\",\"static/chunks/637-6e55fbf6c1f17bbc.js\",\"353\",\"static/chunks/app/(content)/articles/%5Bslug%5D/page-e12b9a0df8b2e915.js\"],\"BackButton\"]\n16:I[3298,[\"513\",\"static/chunks/513-54c786173a9c666c.js\",\"189\",\"static/chunks/189-76139bfb22cdcfc2.js\",\"122\",\"static/chunks/122-1e2541ae7fd00b15.js\",\"637\",\"static/chunks/637-6e55fbf6c1f17bbc.js\",\"353\",\"static/chunks/app/(content)/articles/%5Bslug%5D/page-e12b9a0df8b2e915.js\"],\"ClientShare\"]\n17:I[6231,[\"513\",\"static/chunks/513-54c786173a9c666c.js\",\"189\",\"static/chunks/189-76139bfb22cdcfc2.js\",\"122\",\"static/chunks/122-1e2541ae7fd00b15.js\",\"637\",\"static/chunks/637-6e55fbf6c1f17bbc.js\",\"353\",\"static/chunks/app/(content)/articles/%5Bslug%5D/page-e12b9a0df8b2e915.js\"],\"LazyImage\"]\n18:I[1514,[\"513\",\"static/chunks/513-54c786173a9c666c.js\",\"189\",\"static/chunks/189-76139bfb22cdcfc2.js\",\"122\",\"static/chunks/122-1e2541ae7fd00b15.js\",\"637\",\"static/chunks/637-6e55fbf6c1f17bbc.js\",\"353\",\"static/chunks/app/(content)/articles/%5Bslug%5D/page-e12b9a0df8b2e915.js\"],\"\"]\n19:I[2181,[\"513\",\"static/chunks/513-54c786173a9c666c.js\",\"189\",\"static/chunks/189-76139bfb22cdcfc2.js\",\"122\",\"static/chunks/122-1e2541ae7fd00b15.js\",\"637\",\"static/chunks/637-6e55fbf6c1f17bbc.js\",\"353\",\"static/chunks/app/(content)/articles/%5Bslug%5D/page-e12b9a0df8b2e915.js\"],\"ArticleContent\"]\n1b:I[2027,[\"513\",\"static/chunks/513-54c786173a9c666c.js\",\"189\",\"static/chunks/189-76139bfb22cdcfc2.js\",\"122\",\"static/chunks/122-1e2541ae7fd00b15.js\",\"637\",\"static/chunks/637-6e55fbf6c1f17bbc.js\",\"353\",\"static/chunks/app/(content)/articles/%5Bslug%5D/page-e12b9a0df8b2e915.js\"],\"TableOfContents\"]\n1a:T6680,"])</script><script>self.__next_f.push([1,"\u003ch2 id=\"-ollama-introduction\"\u003eü¶ô Ollama introduction\u003cspan class=\"ml-2 opacity-0 hover:opacity-100\"\u003e\u003ca href=\"#-ollama-introduction\" class=\"anchor\" aria-hidden=\"true\"\u003e#\u003c/a\u003e\u003c/span\u003e\u003c/h2\u003e\n\u003cp\u003e\u003ca href=\"https://ollama.com/\"\u003eOllama\u003c/a\u003e is a powerful platform designed to make it easy for developers \u003cstrong\u003eto run large language models (LLMs) directly on their local computers\u003c/strong\u003e, without needing a \u003cdel\u003ebig server\u003c/del\u003e or expensive hardware like \u003cdel\u003ehigh-end GPUs\u003c/del\u003e.\u003c/p\u003e\n\u003cp\u003eWith \u003ca href=\"https://ollama.com/\"\u003eOllama\u003c/a\u003e, you can get up and running with models such as \u003ccode\u003eLlama 3.3\u003c/code\u003e, \u003ccode\u003ePhi 3\u003c/code\u003e, \u003ccode\u003eMistral\u003c/code\u003e, \u003ccode\u003eGemma 2\u003c/code\u003e, and more, all \u003cdel\u003ewithout the need for specialized cloud infrastructure\u003c/del\u003e.\u003c/p\u003e\n\u003cp\u003eIn short, \u003ca href=\"https://ollama.com/\"\u003eOllama\u003c/a\u003e democratizes access to cutting-edge \u003ccode\u003eAI models\u003c/code\u003e, making them \u003cstrong\u003eaccessible on personal computers\u003c/strong\u003e and empowering developers to build AI solutions without the burden of \u003cdel\u003eexpensive server infrastructure\u003c/del\u003e.\u003c/p\u003e\n\u003ch2 id=\"-why-use-json-schema-constraints-in-ollama\"\u003eüîë Why Use JSON Schema Constraints in Ollama?\u003cspan class=\"ml-2 opacity-0 hover:opacity-100\"\u003e\u003ca href=\"#-why-use-json-schema-constraints-in-ollama\" class=\"anchor\" aria-hidden=\"true\"\u003e#\u003c/a\u003e\u003c/span\u003e\u003c/h2\u003e\n\u003cp\u003e\u003ca href=\"https://ollama.com/\"\u003eOllama\u003c/a\u003e now supports to constrain the output to a json\nschema. \u003ca href=\"https://ollama.com/blog/structured-outputs\"\u003ehttps://ollama.com/blog/structured-outputs\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eUse cases for structured outputs include:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eParsing data from documents\u003c/li\u003e\n\u003cli\u003eExtracting data from images\u003c/li\u003e\n\u003cli\u003eStructuring all language model responses\u003c/li\u003e\n\u003cli\u003eMore reliability and consistency than JSON mode\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"-getting-started\"\u003eüöÄ Getting Started\u003cspan class=\"ml-2 opacity-0 hover:opacity-100\"\u003e\u003ca href=\"#-getting-started\" class=\"anchor\" aria-hidden=\"true\"\u003e#\u003c/a\u003e\u003c/span\u003e\u003c/h2\u003e\n\u003ch3 id=\"1-install-ollama\"\u003e1. Install Ollama\u003cspan class=\"ml-2 opacity-0 hover:opacity-100\"\u003e\u003ca href=\"#1-install-ollama\" class=\"anchor\" aria-hidden=\"true\"\u003e#\u003c/a\u003e\u003c/span\u003e\u003c/h3\u003e\n\u003cp\u003eDownload \u003ca href=\"https://ollama.com/\"\u003eOllama\u003c/a\u003e from \u003ca href=\"https://ollama.com/download\"\u003ehttps://ollama.com/download\u003c/a\u003e. Choose the appropriate version for your\nplatform and complete the installation.\u003c/p\u003e\n\u003ch3 id=\"2-verify-installation\"\u003e2. Verify Installation\u003cspan class=\"ml-2 opacity-0 hover:opacity-100\"\u003e\u003ca href=\"#2-verify-installation\" class=\"anchor\" aria-hidden=\"true\"\u003e#\u003c/a\u003e\u003c/span\u003e\u003c/h3\u003e\n\u003cp\u003eAfter installation, confirm the version by running:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-shell\"\u003eollama --version\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eexpected output format:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-shell\"\u003eollama version is 0.5.1\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3 id=\"3-start-ollama-server\"\u003e3. Start Ollama Server\u003cspan class=\"ml-2 opacity-0 hover:opacity-100\"\u003e\u003ca href=\"#3-start-ollama-server\" class=\"anchor\" aria-hidden=\"true\"\u003e#\u003c/a\u003e\u003c/span\u003e\u003c/h3\u003e\n\u003cp\u003eRun the following command to start the server:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-shell\"\u003eollama serve\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eBy default, the server runs on port 11434. You can verify this by\nvisiting \u003ca href=\"http://localhost:11434\"\u003ehttp://localhost:11434\u003c/a\u003e.\u003c/p\u003e\n\u003ch3 id=\"4-download-the-ollama-model\"\u003e4. Download the Ollama Model\u003cspan class=\"ml-2 opacity-0 hover:opacity-100\"\u003e\u003ca href=\"#4-download-the-ollama-model\" class=\"anchor\" aria-hidden=\"true\"\u003e#\u003c/a\u003e\u003c/span\u003e\u003c/h3\u003e\n\u003cp\u003eI recommend the \u003ccode\u003ellama3.2\u003c/code\u003e model for its compact size (\u003ccode\u003e2.0 GB\u003c/code\u003e) and impressive performance.\u003c/p\u003e\n\u003cp\u003eIt features \u003ccode\u003e3 billion\u003c/code\u003e parameters and \u003cstrong\u003eoutperforms\u003c/strong\u003e many larger models in industry benchmarks.\u003c/p\u003e\n\u003cp\u003eDownload the model with:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-shell\"\u003eollama run llama3.2\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eVerify the download:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-shell\"\u003eollama list\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eExpected output:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-shell\"\u003eNAME                       ID              SIZE      MODIFIED        \nllama3.2:latest            a80c4f17acd5    2.0 GB    n weeks ago\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"Ô∏è-run-using-curl\"\u003e‚ñ∂Ô∏è Run using CURL\u003cspan class=\"ml-2 opacity-0 hover:opacity-100\"\u003e\u003ca href=\"#Ô∏è-run-using-curl\" class=\"anchor\" aria-hidden=\"true\"\u003e#\u003c/a\u003e\u003c/span\u003e\u003c/h2\u003e\n\u003cp\u003eRun using curl directly to \u003ca href=\"https://ollama.com/\"\u003eOllama\u003c/a\u003e server \u003ca href=\"http://localhost:11434\"\u003ehttp://localhost:11434\u003c/a\u003e.\u003c/p\u003e\n\u003cp\u003eThere is no need to code, there is no setup, no need to install anything (*make sure you have curl installed).\u003c/p\u003e\n\u003ch3 id=\"use-case-1-extract-country-data\"\u003eUse Case 1: Extract Country Data\u003cspan class=\"ml-2 opacity-0 hover:opacity-100\"\u003e\u003ca href=\"#use-case-1-extract-country-data\" class=\"anchor\" aria-hidden=\"true\"\u003e#\u003c/a\u003e\u003c/span\u003e\u003c/h3\u003e\n\u003cblockquote\u003e\n\u003cp\u003eInput Prompt: \"Tell me about Canada.\"\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch4 id=\"schema\"\u003eSchema\u003c/h4\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-json\"\u003e\u003cspan class=\"hljs-punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003e\"type\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"object\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003e\"properties\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\"name\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-punctuation\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003e\"type\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"string\"\u003c/span\u003e\n    \u003cspan class=\"hljs-punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\"capital\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-punctuation\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003e\"type\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"string\"\u003c/span\u003e\n    \u003cspan class=\"hljs-punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\"languages\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-punctuation\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003e\"type\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"array\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003e\"items\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"hljs-attr\"\u003e\"type\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"string\"\u003c/span\u003e\n      \u003cspan class=\"hljs-punctuation\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"hljs-punctuation\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"hljs-punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003e\"required\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-punctuation\"\u003e[\u003c/span\u003e\n    \u003cspan class=\"hljs-string\"\u003e\"name\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"hljs-string\"\u003e\"capital\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"hljs-string\"\u003e\"languages\"\u003c/span\u003e\n  \u003cspan class=\"hljs-punctuation\"\u003e]\u003c/span\u003e\n\u003cspan class=\"hljs-punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch4 id=\"curl-request\"\u003eCurl Request\u003c/h4\u003e\n\u003cp\u003ejson schema above included in the request in field \u003ccode\u003eformat\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eRun the following command in the terminal:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003ecurl --location \u003cspan class=\"hljs-string\"\u003e'http://127.0.0.1:11434/api/chat'\u003c/span\u003e \\\n--header \u003cspan class=\"hljs-string\"\u003e'Content-Type: application/json'\u003c/span\u003e \\\n--data \u003cspan class=\"hljs-string\"\u003e'{\n  \"model\": \"llama3.2\",\n  \"messages\": [{\"role\": \"user\", \"content\": \"Tell me about Canada.\"}],\n  \"stream\": false,\n  \"format\": {\n    \"type\": \"object\",\n    \"properties\": {\n      \"name\": { \"type\": \"string\" },\n      \"capital\": { \"type\": \"string\" },\n      \"languages\": { \"type\": \"array\", \"items\": { \"type\": \"string\" } }\n    },\n    \"required\": [\"name\", \"capital\", \"languages\"]\n  }\n}'\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch4 id=\"response\"\u003eResponse\u003c/h4\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-json\"\u003e\u003cspan class=\"hljs-punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003e\"model\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"llama3.2\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003e\"created_at\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"2024-12-12T07:47:22.184905Z\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003e\"message\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\"role\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"assistant\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\"content\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"{ \\\"capital\\\": \\\"Ottawa\\\", \\\"languages\\\": [\\\"English\\\", \\\"French\\\"], \\\"name\\\":\\\"Canada\\\" }\"\u003c/span\u003e\n  \u003cspan class=\"hljs-punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003e\"done_reason\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"stop\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003e\"done\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-literal\"\u003e\u003cspan class=\"hljs-keyword\"\u003etrue\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003e\"total_duration\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1232600000\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003e\"load_duration\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e33616458\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003e\"prompt_eval_count\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e30\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003e\"prompt_eval_duration\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e495000000\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003e\"eval_count\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e29\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003e\"eval_duration\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e700000000\u003c/span\u003e\n\u003cspan class=\"hljs-punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003esee field \u003ccode\u003emessage.content\u003c/code\u003e using the same json schema as above\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-json\"\u003e\u003cspan class=\"hljs-punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003e\"capital\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"Ottawa\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003e\"languages\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-punctuation\"\u003e[\u003c/span\u003e\n    \u003cspan class=\"hljs-string\"\u003e\"English\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"hljs-string\"\u003e\"French\"\u003c/span\u003e\n  \u003cspan class=\"hljs-punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003e\"name\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"Canada\"\u003c/span\u003e\n\u003cspan class=\"hljs-punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3 id=\"use-case-2-extract-pets-data\"\u003eUse Case 2: Extract Pets Data\u003cspan class=\"ml-2 opacity-0 hover:opacity-100\"\u003e\u003ca href=\"#use-case-2-extract-pets-data\" class=\"anchor\" aria-hidden=\"true\"\u003e#\u003c/a\u003e\u003c/span\u003e\u003c/h3\u003e\n\u003cblockquote\u003e\n\u003cp\u003ePrompt: \"I have two pets. A cat named Luna who is 5 years old and loves playing with yarn. She has grey fur. I also have a 2-year-old black cat named Loki who loves tennis balls.\"\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch4 id=\"schema-1\"\u003eSchema\u003c/h4\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-json\"\u003e\u003cspan class=\"hljs-punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003e\"$defs\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\"Pet\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-punctuation\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003e\"properties\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"hljs-attr\"\u003e\"age\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-punctuation\"\u003e{\u003c/span\u003e\n          \u003cspan class=\"hljs-attr\"\u003e\"type\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"integer\"\u003c/span\u003e\n        \u003cspan class=\"hljs-punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"hljs-attr\"\u003e\"animal\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-punctuation\"\u003e{\u003c/span\u003e\n          \u003cspan class=\"hljs-attr\"\u003e\"type\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"string\"\u003c/span\u003e\n        \u003cspan class=\"hljs-punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"hljs-attr\"\u003e\"color\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-punctuation\"\u003e{\u003c/span\u003e\n          \u003cspan class=\"hljs-attr\"\u003e\"anyOf\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-punctuation\"\u003e[\u003c/span\u003e\n            \u003cspan class=\"hljs-punctuation\"\u003e{\u003c/span\u003e\n              \u003cspan class=\"hljs-attr\"\u003e\"const\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"black\"\u003c/span\u003e\n            \u003cspan class=\"hljs-punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"hljs-punctuation\"\u003e{\u003c/span\u003e\n              \u003cspan class=\"hljs-attr\"\u003e\"const\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"grey\"\u003c/span\u003e\n            \u003cspan class=\"hljs-punctuation\"\u003e}\u003c/span\u003e\n          \u003cspan class=\"hljs-punctuation\"\u003e]\u003c/span\u003e\n        \u003cspan class=\"hljs-punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"hljs-attr\"\u003e\"favorite_toy\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-punctuation\"\u003e{\u003c/span\u003e\n          \u003cspan class=\"hljs-attr\"\u003e\"anyOf\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-punctuation\"\u003e[\u003c/span\u003e\n            \u003cspan class=\"hljs-punctuation\"\u003e{\u003c/span\u003e\n              \u003cspan class=\"hljs-attr\"\u003e\"const\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"yarn\"\u003c/span\u003e\n            \u003cspan class=\"hljs-punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"hljs-punctuation\"\u003e{\u003c/span\u003e\n              \u003cspan class=\"hljs-attr\"\u003e\"const\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"tennis balls\"\u003c/span\u003e\n            \u003cspan class=\"hljs-punctuation\"\u003e}\u003c/span\u003e\n          \u003cspan class=\"hljs-punctuation\"\u003e]\u003c/span\u003e\n        \u003cspan class=\"hljs-punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"hljs-attr\"\u003e\"name\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-punctuation\"\u003e{\u003c/span\u003e\n          \u003cspan class=\"hljs-attr\"\u003e\"type\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"string\"\u003c/span\u003e\n        \u003cspan class=\"hljs-punctuation\"\u003e}\u003c/span\u003e\n      \u003cspan class=\"hljs-punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003e\"required\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-punctuation\"\u003e[\u003c/span\u003e\n        \u003cspan class=\"hljs-string\"\u003e\"name\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"hljs-string\"\u003e\"animal\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"hljs-string\"\u003e\"age\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"hljs-string\"\u003e\"color\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"hljs-string\"\u003e\"favorite_toy\"\u003c/span\u003e\n      \u003cspan class=\"hljs-punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003e\"type\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"object\"\u003c/span\u003e\n    \u003cspan class=\"hljs-punctuation\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"hljs-punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003e\"properties\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\"pets\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-punctuation\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003e\"type\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"array\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003e\"items\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"hljs-attr\"\u003e\"$ref\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"#/$defs/Pet\"\u003c/span\u003e\n      \u003cspan class=\"hljs-punctuation\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"hljs-punctuation\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"hljs-punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003e\"required\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-punctuation\"\u003e[\u003c/span\u003e\n    \u003cspan class=\"hljs-string\"\u003e\"pets\"\u003c/span\u003e\n  \u003cspan class=\"hljs-punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003e\"type\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"object\"\u003c/span\u003e\n\u003cspan class=\"hljs-punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch4 id=\"curl-request-1\"\u003eCurl Request\u003c/h4\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003ecurl --location \u003cspan class=\"hljs-string\"\u003e'http://127.0.0.1:11434/api/chat'\u003c/span\u003e \\\n--header \u003cspan class=\"hljs-string\"\u003e'Content-Type: application/json'\u003c/span\u003e \\\n--data \u003cspan class=\"hljs-string\"\u003e'{\n  \"model\": \"llama3.2\",\n  \"messages\": [{\n    \"role\": \"user\",\n    \"content\": \"I have two pets. A cat named Luna who is 5 years old and loves playing with yarn. She has grey fur. I also have a 2-year-old black cat named Loki who loves tennis balls.\"\n  }],\n  \"stream\": false,\n  \"format\": {\n    \"$defs\": {\n      \"Pet\": {\n        \"properties\": {\n          \"age\": { \"type\": \"integer\" },\n          \"animal\": { \"type\": \"string\" },\n          \"color\": { \"anyOf\": [\n            { \"const\": \"black\" },\n            { \"const\": \"grey\" }\n          ] },\n          \"favorite_toy\": { \"anyOf\": [\n            { \"const\": \"yarn\" },\n            { \"const\": \"tennis balls\" }\n          ] },\n          \"name\": { \"type\": \"string\" }\n        },\n        \"required\": [\"name\", \"animal\", \"age\", \"color\", \"favorite_toy\"],\n        \"type\": \"object\"\n      }\n    },\n    \"properties\": {\n      \"pets\": {\n        \"type\": \"array\",\n        \"items\": { \"$ref\": \"#/$defs/Pet\" }\n      }\n    },\n    \"required\": [\"pets\"],\n    \"type\": \"object\"\n  }\n}'\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch4 id=\"response-1\"\u003eResponse\u003c/h4\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-json\"\u003e\u003cspan class=\"hljs-punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\"model\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"llama3.2\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\"created_at\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"2024-12-12T08:32:37.316804Z\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\"message\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"hljs-attr\"\u003e\"role\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"assistant\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"hljs-attr\"\u003e\"content\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"{ \\\"pets\\\": [ { \\\"age\\\": 5, \\\"animal\\\": \\\"cat\\\", \\\"color\\\": \\\"grey\\\", \\\"favorite_toy\\\": \\\"yarn\\\" , \\\"name\\\": \\\"Luna\\\"}, { \\\"age\\\": 2, \\\"animal\\\": \\\"cat\\\", \\\"color\\\": \\\"black\\\", \\\"favorite_toy\\\": \\\"tennis balls\\\" , \\\"name\\\": \\\"Loki\\\"}] }\"\u003c/span\u003e\n    \u003cspan class=\"hljs-punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\"done_reason\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"stop\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\"done\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-literal\"\u003e\u003cspan class=\"hljs-keyword\"\u003etrue\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\"total_duration\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e7159731958\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\"load_duration\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e829545916\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\"prompt_eval_count\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e68\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\"prompt_eval_duration\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e4620000000\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\"eval_count\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e82\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\"eval_duration\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1697000000\u003c/span\u003e\n\u003cspan class=\"hljs-punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003esee field \u003ccode\u003emessage.content\u003c/code\u003e using the same json schema as above\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-json\"\u003e\u003cspan class=\"hljs-punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003e\"pets\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-punctuation\"\u003e[\u003c/span\u003e\n    \u003cspan class=\"hljs-punctuation\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003e\"age\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003e\"animal\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"cat\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003e\"color\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"grey\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003e\"favorite_toy\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"yarn\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003e\"name\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"Luna\"\u003c/span\u003e\n    \u003cspan class=\"hljs-punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"hljs-punctuation\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003e\"age\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003e\"animal\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"cat\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003e\"color\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"black\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003e\"favorite_toy\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"tennis balls\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003e\"name\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"Loki\"\u003c/span\u003e\n    \u003cspan class=\"hljs-punctuation\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"hljs-punctuation\"\u003e]\u003c/span\u003e\n\u003cspan class=\"hljs-punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"Ô∏è-run-using-demo-python-api\"\u003e‚ñ∂Ô∏è Run using demo python api\u003cspan class=\"ml-2 opacity-0 hover:opacity-100\"\u003e\u003ca href=\"#Ô∏è-run-using-demo-python-api\" class=\"anchor\" aria-hidden=\"true\"\u003e#\u003c/a\u003e\u003c/span\u003e\u003c/h2\u003e\n\u003cp\u003eRecommend to use python 3.10.* with venv\u003c/p\u003e\n\u003ch3 id=\"1-create-venv\"\u003e1. Create venv\u003cspan class=\"ml-2 opacity-0 hover:opacity-100\"\u003e\u003ca href=\"#1-create-venv\" class=\"anchor\" aria-hidden=\"true\"\u003e#\u003c/a\u003e\u003c/span\u003e\u003c/h3\u003e\n\u003cp\u003eClone this repository\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-shell\"\u003egit clone https://github.com/harryosmar/ollama-demo-python.git\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eRun the following command in the terminal:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-shell\"\u003ecd ollama-demo-python\n\npython3 -m venv venv\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3 id=\"2-activate-venv\"\u003e2. Activate venv\u003cspan class=\"ml-2 opacity-0 hover:opacity-100\"\u003e\u003ca href=\"#2-activate-venv\" class=\"anchor\" aria-hidden=\"true\"\u003e#\u003c/a\u003e\u003c/span\u003e\u003c/h3\u003e\n\u003cp\u003eRun the following command in the terminal:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-shell\"\u003esource ./venv/bin/activate\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3 id=\"3-install-requirements\"\u003e3. Install requirements\u003cspan class=\"ml-2 opacity-0 hover:opacity-100\"\u003e\u003ca href=\"#3-install-requirements\" class=\"anchor\" aria-hidden=\"true\"\u003e#\u003c/a\u003e\u003c/span\u003e\u003c/h3\u003e\n\u003cp\u003eRun the following command in the terminal:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-shell\"\u003epip install -r requirements.txt\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://flask.palletsprojects.com/en/2.3.x/\"\u003eFlask\u003c/a\u003e used as api framework\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://pydantic-docs.helpmanual.io/\"\u003epydantic\u003c/a\u003e used for data validation, create json schema from python class\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"4-run-app\"\u003e4. Run app\u003cspan class=\"ml-2 opacity-0 hover:opacity-100\"\u003e\u003ca href=\"#4-run-app\" class=\"anchor\" aria-hidden=\"true\"\u003e#\u003c/a\u003e\u003c/span\u003e\u003c/h3\u003e\n\u003cp\u003eRun the following command in the terminal:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-shell\"\u003eflask --app main run\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eStart api server in \u003ca href=\"http://127.0.0.1:5000\"\u003ehttp://127.0.0.1:5000\u003c/a\u003e\u003c/p\u003e\n\u003ch3 id=\"5-swagger-endpoints\"\u003e5. Swagger endpoints\u003cspan class=\"ml-2 opacity-0 hover:opacity-100\"\u003e\u003ca href=\"#5-swagger-endpoints\" class=\"anchor\" aria-hidden=\"true\"\u003e#\u003c/a\u003e\u003c/span\u003e\u003c/h3\u003e\n\u003cp\u003e\u003ca href=\"http://127.0.0.1:5000/apidocs/\"\u003eswagger access link http://127.0.0.1:5000/apidocs/\u003c/a\u003e\u003c/p\u003e\n\u003ch2 id=\"-conclusion\"\u003eüî• Conclusion\u003cspan class=\"ml-2 opacity-0 hover:opacity-100\"\u003e\u003ca href=\"#-conclusion\" class=\"anchor\" aria-hidden=\"true\"\u003e#\u003c/a\u003e\u003c/span\u003e\u003c/h2\u003e\n\u003cp\u003eBy leveraging JSON schema constraints, \u003ca href=\"https://ollama.com/\"\u003eOllama\u003c/a\u003e ensures structured, reliable, and predictable outputs from LLMs. Whether you‚Äôre parsing documents, analyzing images, or building robust APIs, this feature delivers the consistency and accuracy you need.\u003c/p\u003e\n\u003ch2 id=\"-credits\"\u003eüèÖ Credits\u003cspan class=\"ml-2 opacity-0 hover:opacity-100\"\u003e\u003ca href=\"#-credits\" class=\"anchor\" aria-hidden=\"true\"\u003e#\u003c/a\u003e\u003c/span\u003e\u003c/h2\u003e\n\u003cp\u003eGive credits to \u003cstrong\u003eMatt Williams\u003c/strong\u003e with his youtube channel \u003ca href=\"https://www.youtube.com/@technovangelist\"\u003ehttps://www.youtube.com/@technovangelist\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eHe was part of the \u003cstrong\u003efounding\u003c/strong\u003e \u003ca href=\"https://ollama.com/\"\u003eOllama\u003c/a\u003e team. Don't forget to check out \u0026#x26; subscribe to his channel, help him to reach 1 million subscribers.\u003c/p\u003e\n\u003cp\u003eI learned a lot from his videos, thank you Matt, hats off to you! üëè\u003c/p\u003e"])</script><script>self.__next_f.push([1,"8:[\"$\",\"div\",null,{\"className\":\"min-h-screen\",\"children\":[[\"$\",\"div\",null,{\"children\":[\"$\",\"div\",null,{\"className\":\"max-w-[692px] mx-auto px-4 pt-20 pb-12\",\"children\":[[\"$\",\"div\",null,{\"className\":\"flex items-center justify-between mb-12\",\"children\":[[\"$\",\"$L15\",null,{\"href\":\"/articles\",\"label\":\"‚Üê Articles\",\"className\":\"text-sm text-neutral-500 hover:text-neutral-900 dark:hover:text-neutral-100\"}],[\"$\",\"$L16\",null,{\"type\":\"articles\",\"slug\":\"ai-ollama-structured-output\",\"title\":\"Unlocking the Power of AI: Ollama LLM with Structured Output\"}]]}],[\"$\",\"h1\",null,{\"className\":\"text-4xl font-bold tracking-tight text-neutral-900 dark:text-neutral-100 mb-8\",\"children\":\"Unlocking the Power of AI: Ollama LLM with Structured Output\"}],[\"$\",\"div\",null,{\"className\":\"flex items-start gap-3 mb-12\",\"children\":[[\"$\",\"div\",null,{\"className\":\"w-12 h-12 rounded-full overflow-hidden flex-shrink-0\",\"children\":[\"$\",\"$L17\",null,{\"src\":\"/images/about/harry.jpeg\",\"alt\":\"Harry Osmar Sitohang\",\"width\":48,\"height\":48,\"className\":\"w-full h-full object-cover\"}]}],[\"$\",\"div\",null,{\"className\":\"flex flex-col flex-1\",\"children\":[[\"$\",\"div\",null,{\"className\":\"flex items-center justify-between\",\"children\":[\"$\",\"$L18\",null,{\"href\":\"/about/harry-osmar-sitohang\",\"className\":\"text-[15px] font-medium text-neutral-900 dark:text-neutral-100 hover:underline\",\"children\":\"Harry Osmar Sitohang\"}]}],[\"$\",\"div\",null,{\"className\":\"flex items-center gap-1 text-[14px] text-neutral-500\",\"children\":[[\"$\",\"div\",null,{\"className\":\"text-neutral-500\",\"children\":\"Senior Principal Engineer\"}],[\"$\",\"span\",null,{\"children\":\"¬∑\"}],[\"$\",\"time\",null,{\"dateTime\":\"2024-12-12T22:53:00+07:00\",\"children\":\"Dec 12, 2024\"}],[\"$\",\"span\",null,{\"children\":\"¬∑\"}],[\"$\",\"span\",null,{\"children\":[6,\" min read\"]}]]}]]}]]}],[\"$\",\"div\",null,{\"className\":\"relative aspect-[16/9] rounded-lg overflow-hidden mb-12\",\"children\":[\"$\",\"$L17\",null,{\"src\":\"/images/articles/ai-ollama-structured-output.webp\",\"alt\":\"Unlocking the Power of AI: Ollama LLM with Structured Output\",\"fill\":true,\"className\":\"object-cover\",\"priority\":true}]}]]}]}],[\"$\",\"div\",null,{\"className\":\"relative\",\"children\":[\"$\",\"div\",null,{\"className\":\"lg:grid lg:grid-cols-[692px_250px] lg:gap-16 lg:justify-center\",\"children\":[[\"$\",\"article\",null,{\"className\":\"mx-auto w-full px-4 pb-20\",\"children\":[[\"$\",\"div\",null,{\"className\":\"sticky top-0 z-10 -mx-4 px-4 py-3 bg-white/95 dark:bg-neutral-900/95 backdrop-blur-sm border-b border-neutral-200 dark:border-neutral-800\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center justify-between max-w-[692px] mx-auto\",\"children\":[[\"$\",\"div\",null,{\"className\":\"flex items-center gap-4\",\"children\":[\"$\",\"h2\",null,{\"className\":\"text-sm font-medium text-neutral-900 dark:text-neutral-100\",\"children\":\"Unlocking the Power of AI: Ollama LLM with Structured Output\"}]}],[\"$\",\"$L16\",null,{\"type\":\"projects\",\"slug\":\"ai-ollama-structured-output\",\"title\":\"Unlocking the Power of AI: Ollama LLM with Structured Output\"}]]}]}],[\"$\",\"div\",null,{\"className\":\"mt-8 prose dark:prose-invert prose-neutral max-w-none prose-headings:font-serif prose-headings:tracking-tight prose-headings:font-normal prose-h2:text-[24px] prose-h2:leading-[32px] prose-p:text-neutral-800 dark:prose-p:text-neutral-200 prose-p:leading-[32px] prose-a:text-neutral-900 dark:prose-a:text-neutral-100 prose-a:decoration-neutral-300 dark:prose-a:decoration-neutral-700 hover:prose-a:decoration-neutral-600 dark:hover:prose-a:decoration-neutral-400\",\"children\":[\"$\",\"$L19\",null,{\"content\":\"$1a\"}]}]]}],[\"$\",\"aside\",null,{\"className\":\"hidden lg:block px-4\",\"children\":[\"$\",\"div\",null,{\"className\":\"sticky top-8\",\"children\":[\"$\",\"$L1b\",null,{}]}]}]]}]}]]}]\n"])</script><script>self.__next_f.push([1,"12:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"2\",{\"children\":\"Unlocking the Power of AI: Ollama LLM with Structured Output | Harry Osmar Sitohang | Harry Osmar Sitohang\"}],[\"$\",\"meta\",\"3\",{\"name\":\"description\",\"content\":\"JSON schema in Ollama ü¶ô, revolutionizes the way we handle data extraction, response structuring, and consistency\"}],[\"$\",\"meta\",\"4\",{\"name\":\"robots\",\"content\":\"index, follow\"}],[\"$\",\"meta\",\"5\",{\"name\":\"application-name\",\"content\":\"Harry Osmar Sitohang\"}],[\"$\",\"meta\",\"6\",{\"name\":\"linkedin:card\",\"content\":\"summary_large_image\"}],[\"$\",\"meta\",\"7\",{\"name\":\"linkedin:title\",\"content\":\"Unlocking the Power of AI: Ollama LLM with Structured Output | Harry Osmar Sitohang\"}],[\"$\",\"meta\",\"8\",{\"name\":\"linkedin:description\",\"content\":\"JSON schema in Ollama ü¶ô, revolutionizes the way we handle data extraction, response structuring, and consistency\"}],[\"$\",\"meta\",\"9\",{\"name\":\"linkedin:image\",\"content\":\"/images/articles/ai-ollama-structured-output.webp\"}],[\"$\",\"meta\",\"10\",{\"name\":\"linkedin:creator\",\"content\":\"Harry Osmar Sitohang\"}],[\"$\",\"meta\",\"11\",{\"name\":\"al:ios:url\",\"content\":\"linkedin://shareArticle?mini=true\u0026url=https%3A%2F%2Fwww.harryosmarsitohang.com%2Farticles%2Fai-ollama-structured-output\"}],[\"$\",\"meta\",\"12\",{\"name\":\"al:android:url\",\"content\":\"linkedin://shareArticle?mini=true\u0026url=https%3A%2F%2Fwww.harryosmarsitohang.com%2Farticles%2Fai-ollama-structured-output\"}],[\"$\",\"meta\",\"13\",{\"name\":\"al:ios:app_store_id\",\"content\":\"288429040\"}],[\"$\",\"meta\",\"14\",{\"name\":\"al:android:package\",\"content\":\"com.linkedin.android\"}],[\"$\",\"meta\",\"15\",{\"name\":\"al:ios:app_name\",\"content\":\"LinkedIn\"}],[\"$\",\"meta\",\"16\",{\"name\":\"al:android:app_name\",\"content\":\"LinkedIn\"}],[\"$\",\"meta\",\"17\",{\"property\":\"og:title\",\"content\":\"Unlocking the Power of AI: Ollama LLM with Structured Output | Harry Osmar Sitohang\"}],[\"$\",\"meta\",\"18\",{\"property\":\"og:description\",\"content\":\"JSON schema in Ollama ü¶ô, revolutionizes the way we handle data extraction, response structuring, and consistency\"}],[\"$\",\"meta\",\"19\",{\"property\":\"og:url\",\"content\":\"https://www.harryosmarsitohang.com/articles/ai-ollama-structured-output\"}],[\"$\",\"meta\",\"20\",{\"property\":\"og:site_name\",\"content\":\"Harry Osmar Sitohang\"}],[\"$\",\"meta\",\"21\",{\"property\":\"og:locale\",\"content\":\"en_US\"}],[\"$\",\"meta\",\"22\",{\"property\":\"og:image\",\"content\":\"https://www.harryosmarsitohang.com/images/articles/ai-ollama-structured-output.webp\"}],[\"$\",\"meta\",\"23\",{\"property\":\"og:image:width\",\"content\":\"1200\"}],[\"$\",\"meta\",\"24\",{\"property\":\"og:image:height\",\"content\":\"630\"}],[\"$\",\"meta\",\"25\",{\"property\":\"og:image:alt\",\"content\":\"Unlocking the Power of AI: Ollama LLM with Structured Output\"}],[\"$\",\"meta\",\"26\",{\"property\":\"og:type\",\"content\":\"article\"}],[\"$\",\"meta\",\"27\",{\"property\":\"article:published_time\",\"content\":\"2024-12-12T22:53:00+07:00\"}],[\"$\",\"meta\",\"28\",{\"property\":\"article:author\",\"content\":\"https://www.harryosmarsitohang.com/about/harry-osmar-sitohang\"}],[\"$\",\"meta\",\"29\",{\"name\":\"twitter:card\",\"content\":\"summary_large_image\"}],[\"$\",\"meta\",\"30\",{\"name\":\"twitter:title\",\"content\":\"Unlocking the Power of AI: Ollama LLM with Structured Output | Harry Osmar Sitohang\"}],[\"$\",\"meta\",\"31\",{\"name\":\"twitter:description\",\"content\":\"JSON schema in Ollama ü¶ô, revolutionizes the way we handle data extraction, response structuring, and consistency\"}],[\"$\",\"meta\",\"32\",{\"name\":\"twitter:image\",\"content\":\"https://www.harryosmarsitohang.com/images/articles/ai-ollama-structured-output.webp\"}],[\"$\",\"link\",\"33\",{\"rel\":\"icon\",\"href\":\"/favicon.ico\",\"type\":\"image/x-icon\",\"sizes\":\"16x16\"}],[\"$\",\"meta\",\"34\",{\"name\":\"next-size-adjust\"}]]\n"])</script><script>self.__next_f.push([1,"7:null\n"])</script></body></html>